[2025-05-24 11:06:19,870] [INFO] [req_id=9de44250-b52d-4275-8470-fd4989f1fcab] Started GET http://localhost:8000/docs
[2025-05-24 11:06:19,870] [INFO] [req_id=9de44250-b52d-4275-8470-fd4989f1fcab] Body: <non-JSON body>
[2025-05-24 11:06:19,871] [INFO] [req_id=9de44250-b52d-4275-8470-fd4989f1fcab] Completed with status 200
[2025-05-24 11:06:19,872] [INFO] [req_id=9de44250-b52d-4275-8470-fd4989f1fcab] Response: 
    <!DOCTYPE html>
    <html>
    <head>
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swagger-ui-dist@4/swagger-ui.css">
    <link rel="shortcut icon" href="https://fastapi.tiangolo.com/img/favicon.png">
    <title>Mini Exchange - Swagger UI</title>
    </head>
    <body>
    <div id="swagger-ui">
    </div>
    <script src="https://cdn.jsdelivr.net/npm/swagger-ui-dist@4/swagger-ui-bundle.js"></script>
    <!-- `SwaggerUIBundle` is now available on the page -->
    <script>
    const ui = SwaggerUIBundle({
        url: '/openapi.json',
    "dom_id": "#swagger-ui",
"layout": "BaseLayout",
"deepLinking": true,
"showExtensions": true,
"showCommonExtensions": true,
oauth2RedirectUrl: window.location.origin + '/docs/oauth2-redirect',
    presets: [
        SwaggerUIBundle.presets.apis,
        SwaggerUIBundle.SwaggerUIStandalonePreset
        ],
    })
    </script>
    </body>
    </html>
    
[2025-05-24 11:06:19,873] [INFO] [req_id=9de44250-b52d-4275-8470-fd4989f1fcab] Duration: 0.0040s
[2025-05-24 11:06:21,766] [INFO] [req_id=8b8cfbb8-8feb-41e9-8e1e-ea61eebecf92] Started GET http://localhost:8000/openapi.json
[2025-05-24 11:06:21,767] [INFO] [req_id=8b8cfbb8-8feb-41e9-8e1e-ea61eebecf92] Body: <non-JSON body>
[2025-05-24 11:06:21,799] [INFO] [req_id=8b8cfbb8-8feb-41e9-8e1e-ea61eebecf92] Completed with status 200
[2025-05-24 11:06:21,800] [INFO] [req_id=8b8cfbb8-8feb-41e9-8e1e-ea61eebecf92] Response: {"openapi":"3.0.2","info":{"title":"Mini Exchange","version":"1.0.1"},"paths":{"/api/v1/public/instrument":{"get":{"tags":["public"],"summary":"Список доступных инструментов","operationId":"list_instruments_api_v1_public_instrument_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response List Instruments Api V1 Public Instrument Get","type":"array","items":{"$ref":"#/components/schemas/InstrumentResponse"}}}}}}}},"/api/v1/balance":{"get":{"tags":["balance"],"summary":"Get Balances","description":"Получение балансов текущего пользователя.\n\nВозвращает словарь, где ключи - тикеры валют, значения - целочисленные суммы.","operationId":"get_balances_api_v1_balance_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BalanceResponse"},"example":{"MEMCOIN":0,"DODGE":100500}}}},"401":{"description":"Unauthorized"}},"security":[{"APIKeyHeader":[]}]}},"/api/v1/admin/balance/deposit":{"post":{"tags":["admin"],"summary":"Deposit To Balance","operationId":"deposit_to_balance_api_v1_admin_balance_deposit_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepositRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OkResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/v1/admin/balance/withdraw":{"post":{"tags":["admin"],"summary":"Withdraw From Balance","operationId":"withdraw_from_balance_api_v1_admin_balance_withdraw_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WithdrawRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OkResponse"}}}},"422":{"description":"Ошибка валидации данных"},"500":{"description":"Внутренняя ошибка сервера"}},"security":[{"APIKeyHeader":[]}]}},"/api/v1/order":{"get":{"tags":["order"],"summary":"Получение списка всех заявок","operationId":"get_all_orders_api_v1_order_get","parameters":[{"description":"Максимальное количество заявок","required":false,"schema":{"title":"Limit","maximum":1000.0,"minimum":1.0,"type":"integer","description":"Максимальное количество заявок","default":100},"name":"limit","in":"query"},{"description":"Смещение от начала списка","required":false,"schema":{"title":"Offset","minimum":0.0,"type":"integer","description":"Смещение от начала списка","default":0},"name":"offset","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get All Orders Api V1 Order Get","type":"array","items":{"$ref":"#/components/schemas/OrderDetailResponse"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]},"post":{"tags":["order"],"summary":"Создание заявки","operationId":"create_order_api_v1_order_post","requestBody":{"content":{"application/json":{"schema":{"title":"Body","anyOf":[{"$ref":"#/components/schemas/LimitOrderBody"},{"$ref":"#/components/schemas/MarketOrderBody"}]}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/v1/order/{order_id}":{"get":{"tags":["order"],"summary":"Получение информации о конкретной заявке","operationId":"get_order_by_id_api_v1_order__order_id__get","parameters":[{"description":"ID заявки","required":true,"schema":{"title":"Order Id","type":"string","description":"ID заявки"},"name":"order_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]},"delete":{"tags":["order"],"summary":"Отмена заявки","operationId":"cancel_order_api_v1_order__order_id__delete","parameters":[{"description":"ID заявки для отмены","required":true,"schema":{"title":"Order Id","type":"string","description":"ID заявки для отмены"},"name":"order_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancelOrderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/v1/public/orderbook/{ticker}":{"get":{"tags":["public"],"summary":"Get Orderbook","operationId":"get_orderbook_api_v1_public_orderbook__ticker__get","parameters":[{"description":"Тикер инструмента","required":true,"schema":{"title":"Ticker","type":"string","description":"Тикер инструмента"},"name":"ticker","in":"path"},{"description":"Максимальное количество уровней цен","required":false,"schema":{"title":"Limit","maximum":25.0,"minimum":1.0,"type":"integer","description":"Максимальное количество уровней цен","default":10},"name":"limit","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderbookResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/transactions/{ticker}":{"get":{"tags":["public"],"summary":"Получение истории транзакций","operationId":"get_transaction_history_api_v1_public_transactions__ticker__get","parameters":[{"description":"Тикер инструмента","required":true,"schema":{"title":"Ticker","type":"string","description":"Тикер инструмента"},"name":"ticker","in":"path"},{"description":"Максимальное количество транзакций","required":false,"schema":{"title":"Limit","maximum":100.0,"minimum":1.0,"type":"integer","description":"Максимальное количество транзакций","default":10},"name":"limit","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Transaction History Api V1 Public Transactions  Ticker  Get","type":"array","items":{"$ref":"#/components/schemas/TransactionResponse"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/register":{"post":{"tags":["public"],"summary":"Регистрация пользователя","operationId":"register_user_api_v1_public_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUser"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/profile":{"get":{"tags":["public"],"summary":"Получение профиля пользователя","operationId":"get_profile_user_api_v1_public_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/v1/admin/user/{user_id}":{"delete":{"tags":["admin"],"summary":"Delete User","operationId":"delete_user_api_v1_admin_user__user_id__delete","parameters":[{"required":true,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"User deleted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"detail":"User not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/v1/admin/instrument":{"post":{"tags":["admin"],"summary":"Создать инструмент","operationId":"add_instrument_api_v1_admin_instrument_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstrumentCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstrumentResponse"}}}},"409":{"description":"The instrument already exists"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/v1/admin/instrument/{ticker}":{"delete":{"tags":["admin"],"summary":"Удалить инструмент","operationId":"delete_instrument_api_v1_admin_instrument__ticker__delete","parameters":[{"required":true,"schema":{"title":"Ticker","type":"string"},"name":"ticker","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OkResponse"}}}},"404":{"description":"The instrument was not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}}},"components":{"schemas":{"BalanceResponse":{"title":"BalanceResponse"},"CancelOrderResponse":{"title":"CancelOrderResponse","required":["success","order_id"],"type":"object","properties":{"success":{"title":"Success","type":"boolean"},"order_id":{"title":"Order Id","type":"string"}}},"DepositRequest":{"title":"DepositRequest","required":["user_id","ticker","amount"],"type":"object","properties":{"user_id":{"title":"User Id","type":"string","description":"UUID пользователя","format":"uuid"},"ticker":{"title":"Ticker","type":"string","description":"Тикер валюты"},"amount":{"title":"Amount","exclusiveMinimum":0.0,"type":"integer","description":"Сумма пополнения (должна быть > 0)"}}},"Direction":{"title":"Direction","enum":["BUY","SELL"],"description":"An enumeration."},"ErrorMessage":{"title":"ErrorMessage","required":["detail"],"type":"object","properties":{"detail":{"title":"Detail","type":"string"}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"InstrumentCreate":{"title":"InstrumentCreate","required":["ticker","name"],"type":"object","properties":{"ticker":{"title":"Ticker","pattern":"^[A-Z]{2,10}$","type":"string","description":"Ticker должен быть длинной 2-10 A-Z"},"name":{"title":"Name","type":"string"}}},"InstrumentResponse":{"title":"InstrumentResponse","required":["ticker","name"],"type":"object","properties":{"ticker":{"title":"Ticker","pattern":"^[A-Z]{2,10}$","type":"string","description":"Ticker должен быть длинной 2-10 A-Z"},"name":{"title":"Name","type":"string"}}},"Level":{"title":"Level","required":["price","qty"],"type":"object","properties":{"price":{"title":"Price","type":"integer","description":"Цена уровня"},"qty":{"title":"Qty","type":"integer","description":"Количество на данном уровне"}}},"LimitOrderBody":{"title":"LimitOrderBody","required":["direction","ticker","qty"],"type":"object","properties":{"direction":{"allOf":[{"$ref":"#/components/schemas/Direction"}],"description":"Направление заявки (BUY или SELL)"},"ticker":{"title":"Ticker","type":"string","description":"Тикер валюты или инструмента"},"qty":{"title":"Qty","exclusiveMinimum":0.0,"type":"integer","description":"Количество для покупки или продажи"},"price":{"title":"Price","exclusiveMinimum":0.0,"type":"integer","description":"Цена для лимитной заявки. Если не передаётся, то используется рыночная заявка"}},"example":{"direction":"BUY","ticker":"USD","qty":1,"price":45000}},"MarketOrderBody":{"title":"MarketOrderBody","required":["direction","ticker","qty"],"type":"object","properties":{"direction":{"allOf":[{"$ref":"#/components/schemas/Direction"}],"description":"Направление заявки (BUY или SELL)"},"ticker":{"title":"Ticker","type":"string","description":"Тикер валюты или инструмента"},"qty":{"title":"Qty","exclusiveMinimum":0.0,"type":"integer","description":"Количество для покупки или продажи"}},"example":{"direction":"SELL","ticker":"BTCUSD","qty":1}},"NewUser":{"title":"NewUser","required":["name"],"type":"object","properties":{"name":{"title":"Name","minLength":3,"type":"string"}}},"OkResponse":{"title":"OkResponse","type":"object","properties":{"success":{"title":"Success","enum":[true],"type":"boolean","default":true}}},"OrderBodyResponse":{"title":"OrderBodyResponse","required":["direction","ticker","qty"],"type":"object","properties":{"direction":{"$ref":"#/components/schemas/Direction"},"ticker":{"title":"Ticker","type":"string"},"qty":{"title":"Qty","type":"integer"},"price":{"title":"Price","type":"integer"}}},"OrderDetailResponse":{"title":"OrderDetailResponse","required":["id","status","user_id","timestamp","body"],"type":"object","properties":{"id":{"title":"Id","type":"string"},"status":{"$ref":"#/components/schemas/Status"},"user_id":{"title":"User Id","type":"string"},"timestamp":{"title":"Timestamp","type":"string","description":"Время создания заявки","format":"date-time"},"body":{"$ref":"#/components/schemas/OrderBodyResponse"},"filled":{"title":"Filled","type":"integer","default":0}}},"OrderResponse":{"title":"OrderResponse","required":["success","order_id"],"type":"object","properties":{"success":{"title":"Success","type":"boolean"},"order_id":{"title":"Order Id","type":"string"}}},"OrderbookResponse":{"title":"OrderbookResponse","type":"object","properties":{"bid_levels":{"title":"Bid Levels","type":"array","items":{"$ref":"#/components/schemas/Level"},"description":"Уровни спроса (покупки)"},"ask_levels":{"title":"Ask Levels","type":"array","items":{"$ref":"#/components/schemas/Level"},"description":"Уровни предложения (продажи)"}}},"Status":{"title":"Status","enum":["NEW","EXECUTED","PARTIALLY_EXECUTED","CANCELLED"],"description":"An enumeration."},"TransactionResponse":{"title":"TransactionResponse","required":["ticker","amount","price","timestamp"],"type":"object","properties":{"ticker":{"title":"Ticker","type":"string","description":"Тикер инструмента"},"amount":{"title":"Amount","type":"integer","description":"Количество"},"price":{"title":"Price","type":"integer","description":"Цена"},"timestamp":{"title":"Timestamp","type":"string","description":"Время транзакции","format":"date-time","timezone":true}},"description":"Схема для ответа с одной транзакцией"},"User":{"title":"User","required":["id","name","role","api_key"],"type":"object","properties":{"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"role":{"$ref":"#/components/schemas/UserRole"},"api_key":{"title":"Api Key","type":"string"}}},"UserRole":{"title":"UserRole","enum":["ADMIN","USER"],"type":"string","description":"An enumeration."},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"anyOf":[{"type":"string"},{"type":"integer"}]}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"WithdrawRequest":{"title":"WithdrawRequest","required":["user_id","ticker","amount"],"type":"object","properties":{"user_id":{"title":"User Id","type":"string","description":"UUID пользователя","format":"uuid"},"ticker":{"title":"Ticker","type":"string","description":"Тикер валюты"},"amount":{"title":"Amount","exclusiveMinimum":0.0,"type":"integer","description":"Сумма списания (должна быть > 0)"}}}},"securitySchemes":{"APIKeyHeader":{"type":"apiKey","in":"header","name":"Authorization"}}}}
[2025-05-24 11:06:21,815] [INFO] [req_id=8b8cfbb8-8feb-41e9-8e1e-ea61eebecf92] Duration: 0.0491s
